---
import heroVideo from '../../assets/videos/8197843-hd_1920_1080_30fps.mp4';

interface Props {
	headline?: string;
	subheadline?: string;
}

const {
	headline = "Amplify Vision. Execute Precision.",
	subheadline = "World-Class Audio & Media Production for High-Impact Events",
} = Astro.props;
---

<section class="hero-video" id="hero">
	<div class="hero-video__background">
		<video
			class="hero-video__video"
			autoplay
			loop
			muted
			playsinline
			id="hero-video"
		>
			<source src={heroVideo} type="video/mp4" />
		</video>
		<div class="hero-video__overlay"></div>
	</div>
	
	<div class="hero-video__content container">
		<div class="hero-video__text">
			<h1 class="hero-video__headline animate-fade-in-up">
				{headline}
			</h1>
			<p class="hero-video__subheadline animate-fade-in-up stagger-1">
				{subheadline}
			</p>
			<div class="hero-video__cta animate-fade-in-up stagger-2">
				<a href="#lead-console" class="btn btn-primary">Request Proposal</a>
				<a href="#services" class="btn btn-ghost">Explore Services</a>
			</div>
		</div>
		
		<div class="hero-video__scroll-indicator animate-fade-in stagger-3">
			<span class="text-micro">Scroll to Discover</span>
			<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
				<path d="M12 5v14M19 12l-7 7-7-7"/>
			</svg>
		</div>
	</div>
</section>

<style>
	.hero-video {
		position: relative;
		width: 100%;
		height: 100vh;
		min-height: 600px;
		display: flex;
		align-items: center;
		justify-content: center;
		overflow: hidden;
	}
	
	.hero-video__background {
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		z-index: 0;
	}
	
	.hero-video__video {
		position: absolute;
		top: 50%;
		left: 50%;
		min-width: 100%;
		min-height: 100%;
		width: auto;
		height: auto;
		transform: translate(-50%, -50%);
		object-fit: cover;
		z-index: 0;
	}
	
	.hero-video__overlay {
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		background: linear-gradient(
			to bottom,
			rgba(10, 10, 10, 0.7) 0%,
			rgba(10, 10, 10, 0.85) 50%,
			rgba(10, 10, 10, 0.95) 100%
		);
		z-index: 1;
	}
	
	.hero-video__content {
		position: relative;
		z-index: 2;
		text-align: center;
		width: 100%;
		max-width: 1200px;
		padding: 0 var(--space-6);
	}
	
	.hero-video__text {
		margin-bottom: var(--space-16);
	}
	
	.hero-video__headline {
		font-family: var(--font-display);
		font-size: clamp(2.5rem, 8vw, 5rem);
		line-height: 1.1;
		letter-spacing: var(--tracking-tight-2);
		color: var(--white);
		margin-bottom: var(--space-6);
		text-shadow: 0 4px 20px rgba(0, 0, 0, 0.8);
	}
	
	.hero-video__subheadline {
		font-family: var(--font-body);
		font-size: clamp(1.125rem, 3vw, 1.5rem);
		line-height: 1.6;
		color: var(--white-80);
		max-width: 800px;
		margin: 0 auto var(--space-12);
		text-shadow: 0 2px 10px rgba(0, 0, 0, 0.8);
	}
	
	.hero-video__cta {
		display: flex;
		gap: var(--space-4);
		justify-content: center;
		flex-wrap: wrap;
	}
	
	.hero-video__scroll-indicator {
		position: absolute;
		bottom: var(--space-8);
		left: 50%;
		transform: translateX(-50%);
		display: flex;
		flex-direction: column;
		align-items: center;
		gap: var(--space-2);
		color: var(--white-60);
		animation: float 3s ease-in-out infinite;
	}
	
	.hero-video__scroll-indicator svg {
		width: 24px;
		height: 24px;
	}
	
	@keyframes float {
		0%, 100% {
			transform: translate(-50%, 0);
		}
		50% {
			transform: translate(-50%, 10px);
		}
	}
	
	/* Responsive */
	@media (max-width: 768px) {
		.hero-video {
			min-height: 500px;
		}
		
		.hero-video__cta {
			flex-direction: column;
			align-items: center;
		}
		
		.hero-video__cta .btn {
			width: 100%;
			max-width: 300px;
		}
	}
	
	/* Reduce motion */
	@media (prefers-reduced-motion: reduce) {
		.hero-video__scroll-indicator {
			animation: none;
		}
	}
</style>

<script>
	// Ensure video plays on load
	document.addEventListener('DOMContentLoaded', () => {
		const video = document.getElementById('hero-video') as HTMLVideoElement;
		if (video) {
			// Attempt to play the video
			const playPromise = video.play();
			
			if (playPromise !== undefined) {
				playPromise.catch(error => {
					// Auto-play was prevented, video will play when user interacts
					console.log('Video autoplay prevented:', error);
				});
			}
		}
	});
</script>
